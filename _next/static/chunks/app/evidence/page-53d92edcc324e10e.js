(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{7249:function(e,t,s){Promise.resolve().then(s.bind(s,936))},936:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(7437),n=s(2265),l=s(9376),i=s(3236),r=s(4303),o=s(2183),c=s(2826),d=s(3464),m=s(9407),x=s(794),h=s(3006);let g={"Usage Summary":{deltaPercent:10},"Usage Trends Over Time":{deltaPercent:15},"Usage Thresholds (Tiers)":{deltaPercent:5},"Usage Since Activation":{deltaPercent:8},"Feature Usage":{deltaPercent:12},"Usage Heatmap (by Group/Region)":{deltaPercent:10},"Copilot-Assisted Hours":{deltaPercent:20},"Work Patterns":{deltaPercent:5},"Mapping Features to Work Patterns":{deltaPercent:10}};function p(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)(null),[p,u]=(0,n.useState)(null),[v,b]=(0,n.useState)(!0),f=(0,h.VK)();(0,n.useEffect)(()=>{y()},[]);let y=()=>{s(function(){let e=(0,h.VK)(),t=Array.from(e.planRecommendations.values()).filter(e=>e.completedAt),s=[];for(let a of t){let t=e.getPlan(a.planId);if(!t)continue;let n=e.getSnapshotsByPlan(t.id),l=n.find(e=>e.metric===a.metric&&"baseline"===e.snapshotType),i=n.find(e=>e.metric===a.metric&&"final"===e.snapshotType);if(l&&i)try{let e=function(e,t,s,a,n){let l=(0,h.VK)().getPlanRecommendation(e);if(!l)throw Error("Plan recommendation ".concat(e," not found"));let{delta:i,deltaPercent:r}=function(e,t){if("number"==typeof e&&"number"==typeof t){let s=t-e;return{delta:s,deltaPercent:0!==e?s/e*100:0}}if("string"==typeof e&&"string"==typeof t){let s=t.toLowerCase()!==e.toLowerCase();return{delta:s?1:0,deltaPercent:s?100:0}}return{delta:0,deltaPercent:0}}(t,s),o=function(e){let t=(0,h.VK)(),s=t.getEventsByPlanRecommendation(e),a=t.getPlanRecommendation(e),n=s.filter(e=>{var t;return("OUTREACH_SENT"===e.eventType||"EVENT_HELD"===e.eventType||"LEARNING_ASSIGNED"===e.eventType)&&(null===(t=e.eventData)||void 0===t?void 0:t.audienceSize)});if(n.length>0){let e=0,t=0;for(let s of n){var l,i,r,o;let a=(null===(l=s.eventData)||void 0===l?void 0:l.audienceSize)||1e3;e+=(null===(i=s.eventData)||void 0===i?void 0:i.count)||(null===(r=s.eventData)||void 0===r?void 0:r.attendees)||(null===(o=s.eventData)||void 0===o?void 0:o.users)||0,t=Math.max(t,a)}return t>0?Math.min(e/t,1):0}return(null==a?void 0:a.completedAt)?.3:0}(e),c=l.startedAt?Math.floor((new Date().getTime()-new Date(l.startedAt).getTime())/864e5):0,d=function(e,t){let s=(0,h.VK)().getEventsByPlanRecommendation(e).filter(e=>"CHECKPOINT_SNAPSHOT"===e.eventType);return 0===s.length?Math.max(1-(t/7-2)*.1,.3):Math.min(s.length/(t/7),1)}(e,c),m=g[a]||{deltaPercent:10},x=m.deltaPercent?r>=m.deltaPercent:!!m.absoluteDelta&&Math.abs(i)>=m.absoluteDelta;return{planRecommendationId:e,metric:a,scenario:n,baselineValue:t,finalValue:s,delta:i,deltaPercent:r,coverage:o,persistence:d,evidenceScore:Math.abs(i)*o*d,success:x,winRate:x?.75:.25,observationDays:c,calculatedAt:new Date().toISOString()}}(a.id,l.value,i.value,a.metric,a.scenario);s.push(e)}catch(e){}}let a=s.filter(e=>e.success).length,n=s.length>0?s.reduce((e,t)=>e+t.delta,0)/s.length:0,l=s.length>0?s.reduce((e,t)=>e+t.coverage,0)/s.length:0,i=s.length>0?s.reduce((e,t)=>e+t.persistence,0)/s.length:0,r=s.sort((e,t)=>t.evidenceScore-e.evidenceScore).slice(0,10);return{totalRecommendations:s.length,successfulRecommendations:a,winRate:s.length>0?a/s.length*100:0,avgDelta:n,avgCoverage:100*l,avgPersistence:100*i,topRecommendations:r}}()),b(!1)},N=e=>{let t=f.getPlanRecommendation(e.planRecommendationId),s=t?f.getFeedbackByPlanRecommendation(t.id):[];t&&u({score:e,rec:t,feedback:s})},j=e=>{let t=f.getPlanRecommendation(e.planRecommendationId),s=t?f.getFeedbackByPlanRecommendation(t.id):[],a=t?f.getEventsByPlanRecommendation(t.id):[],n=new Blob([JSON.stringify({metric:e.metric,scenario:e.scenario,recommendation:null==t?void 0:t.recommendation,baseline:e.baselineValue,final:e.finalValue,delta:e.delta,deltaPercent:e.deltaPercent,evidenceScore:e.evidenceScore,coverage:e.coverage,persistence:e.persistence,observationDays:e.observationDays,activities:a.map(e=>({type:e.eventType,date:e.recordedAt,data:e.eventData})),quotes:s.filter(e=>"quote"===e.feedbackType).map(e=>e.feedbackText),nextSteps:(null==t?void 0:t.resources)||"Continue monitoring and expanding adoption"},null,2)],{type:"application/json"}),l=URL.createObjectURL(n),i=document.createElement("a");i.href=l,i.download="evidence-card-".concat(e.metric.replace(/\s+/g,"-").toLowerCase(),".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l),alert("\uD83D\uDCCA Evidence Card exported! (JSON format - can be enhanced to PDF/PPTX)")};return v?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-gray-600",children:"Loading evidence..."})}):t&&0!==t.totalRecommendations?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/"),className:"flex items-center text-microsoft-blue hover:text-blue-700",children:[(0,a.jsx)(i.Z,{className:"mr-2",size:20}),"Home"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Evidence & Outcomes"})]}),(0,a.jsxs)("button",{onClick:()=>e.push("/plans"),className:"inline-flex items-center px-4 py-2 bg-microsoft-blue text-white font-medium rounded-lg hover:bg-blue-600",children:[(0,a.jsx)(r.Z,{size:20,className:"mr-2",weight:"fill"}),"View Plans"]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-lg p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(o.Z,{size:32,weight:"fill"}),(0,a.jsxs)("div",{className:"text-3xl font-bold",children:[t.winRate.toFixed(0),"%"]})]}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"Win Rate"}),(0,a.jsxs)("div",{className:"text-xs opacity-75 mt-1",children:[t.successfulRecommendations," of ",t.totalRecommendations," succeeded"]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(c.Z,{size:32,weight:"fill"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:t.avgDelta.toFixed(1)})]}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"Avg Delta"}),(0,a.jsx)("div",{className:"text-xs opacity-75 mt-1",children:"Average improvement"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-lg p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(d.Z,{size:32,weight:"fill"}),(0,a.jsxs)("div",{className:"text-3xl font-bold",children:[t.avgCoverage.toFixed(0),"%"]})]}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"Avg Coverage"}),(0,a.jsx)("div",{className:"text-xs opacity-75 mt-1",children:"Audience reached"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow-lg p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(m.Z,{size:32,weight:"fill"}),(0,a.jsxs)("div",{className:"text-3xl font-bold",children:[t.avgPersistence.toFixed(0),"%"]})]}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"Avg Persistence"}),(0,a.jsx)("div",{className:"text-xs opacity-75 mt-1",children:"Sustained impact"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"\uD83C\uDFC6 Top Performing Recommendations"}),(0,a.jsx)("div",{className:"space-y-4",children:t.topRecommendations.map((e,t)=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-microsoft-blue hover:shadow-md transition-all cursor-pointer",onClick:()=>N(e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold ".concat(0===t?"bg-yellow-100 text-yellow-700":1===t?"bg-gray-100 text-gray-700":2===t?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:["#",t+1]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-microsoft-blue text-xs font-semibold rounded-full",children:e.metric}),e.success&&(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"✓ SUCCESS"})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.scenario}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mt-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs mb-1",children:"Evidence Score"}),(0,a.jsx)("div",{className:"font-bold text-microsoft-blue",children:e.evidenceScore.toFixed(2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs mb-1",children:"Delta"}),(0,a.jsxs)("div",{className:"font-bold text-gray-900",children:[e.delta>0?"+":"",e.delta.toFixed(1),(0,a.jsxs)("span",{className:"text-xs ml-1 text-gray-600",children:["(",e.deltaPercent.toFixed(0),"%)"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs mb-1",children:"Coverage"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsxs)("div",{className:"font-bold text-gray-900",children:[(100*e.coverage).toFixed(0),"%"]}),e.coverage<.3&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs font-medium rounded",title:"Low coverage - consider logging activities",children:"⚠️"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-xs mb-1",children:"Duration"}),(0,a.jsxs)("div",{className:"font-bold text-gray-900",children:[e.observationDays," days"]})]})]})]})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),j(e)},className:"ml-4 p-2 text-microsoft-blue hover:bg-blue-50 rounded-lg",title:"Export Evidence Card",children:(0,a.jsx)(x.Z,{size:24,weight:"bold"})})]})},e.planRecommendationId))})]})]}),p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Evidence Details"}),(0,a.jsx)("button",{onClick:()=>u(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[p.score.coverage<.3&&(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-yellow-800 mb-1",children:"Low Coverage Detected"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:0===p.score.coverage?"No engagement activities were tracked for this recommendation. The Evidence Score may not accurately reflect impact.":"Only ".concat((100*p.score.coverage).toFixed(0),"% coverage was achieved. Consider logging more engagement activities to strengthen evidence.")}),(0,a.jsxs)("p",{className:"text-xs text-yellow-600 mt-2",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"}),' Go to the Plans page and use "Log Activity" to track outreach, events, and learning assignments.']})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-microsoft-blue text-sm font-semibold rounded-full",children:p.score.metric}),p.score.success&&(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm font-semibold rounded-full",children:"✓ SUCCESS"})]}),(0,a.jsx)("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:p.score.scenario}),(0,a.jsx)("p",{className:"text-gray-700",children:p.rec.recommendation})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-500 mb-1",children:"BASELINE"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:p.score.baselineValue})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-green-600 mb-1",children:"FINAL"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-700",children:p.score.finalValue})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-microsoft-blue",children:[p.score.delta>0?"+":"",p.score.delta.toFixed(1)]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Delta (",p.score.deltaPercent.toFixed(0),"%)"]})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:[(100*p.score.coverage).toFixed(0),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Coverage"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-700",children:[(100*p.score.persistence).toFixed(0),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Persistence"})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-microsoft-blue to-purple-600 rounded-lg p-6 text-white text-center",children:[(0,a.jsx)("div",{className:"text-sm opacity-90 mb-2",children:"EVIDENCE SCORE"}),(0,a.jsx)("div",{className:"text-5xl font-bold",children:p.score.evidenceScore.toFixed(2)}),(0,a.jsxs)("div",{className:"text-xs opacity-75 mt-2",children:["Delta \xd7 Coverage \xd7 Persistence over ",p.score.observationDays," days"]})]}),p.feedback.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900 mb-3",children:"\uD83D\uDCAC Feedback & Quotes"}),(0,a.jsx)("div",{className:"space-y-3",children:p.feedback.map(e=>(0,a.jsxs)("div",{className:"bg-blue-50 border-l-4 border-microsoft-blue rounded p-4",children:[(0,a.jsxs)("p",{className:"text-gray-700 italic",children:['"',e.feedbackText,'"']}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.submittedAt).toLocaleDateString()})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900 mb-2",children:"\uD83D\uDCCB Resources Used"}),(0,a.jsx)("p",{className:"text-gray-700",children:p.rec.resources})]})]}),(0,a.jsx)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end",children:(0,a.jsxs)("button",{onClick:()=>j(p.score),className:"px-4 py-2 bg-microsoft-blue text-white font-medium rounded-lg hover:bg-blue-600 inline-flex items-center",children:[(0,a.jsx)(x.Z,{size:20,className:"mr-2",weight:"bold"}),"Export Evidence Card"]})})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/"),className:"flex items-center text-microsoft-blue hover:text-blue-700",children:[(0,a.jsx)(i.Z,{className:"mr-2",size:20}),"Home"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Evidence"})]}),(0,a.jsxs)("button",{onClick:()=>e.push("/plans"),className:"inline-flex items-center px-4 py-2 bg-microsoft-blue text-white font-medium rounded-lg hover:bg-blue-600",children:[(0,a.jsx)(r.Z,{size:20,className:"mr-2",weight:"fill"}),"View Plans"]})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-12",children:[(0,a.jsx)(o.Z,{size:64,className:"mx-auto mb-4 text-gray-400"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Evidence Yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Complete some recommendations and capture metric snapshots to see evidence of success here."}),(0,a.jsx)("button",{onClick:()=>e.push("/plans"),className:"px-6 py-3 bg-microsoft-blue text-white font-semibold rounded-lg hover:bg-blue-600",children:"View Plans"})]})})]})}},3006:function(e,t,s){"use strict";s.d(t,{VK:function(){return o}});var a=s(7119);let n=a.Km(["planned","in_progress","done","archived"]);a.Ry({id:a.Z_(),tenantId:a.Z_(),name:a.Z_(),description:a.Z_().optional(),status:n,startDate:a.Z_().optional(),targetDate:a.Z_().optional(),completedDate:a.Z_().optional(),createdAt:a.Z_(),updatedAt:a.Z_(),createdBy:a.Z_().optional()}),a.Ry({id:a.Z_(),planId:a.Z_(),recommendationId:a.Z_(),metric:a.Z_(),scenario:a.Z_(),recommendation:a.Z_(),resources:a.Z_(),priority:a.Rx().optional(),addedAt:a.Z_(),startedAt:a.Z_().optional(),completedAt:a.Z_().optional()});let l=a.Km(["ADDED_TO_PLAN","STARTED","OUTREACH_SENT","EVENT_HELD","LEARNING_ASSIGNED","CHECKPOINT_SNAPSHOT","FEEDBACK_GIVEN","MARKED_SUCCESS","MARKED_FAIL"]);a.Ry({id:a.Z_(),planRecommendationId:a.Z_(),eventType:l,eventData:a.IM(a.Yj()).optional(),recordedAt:a.Z_(),recordedBy:a.Z_().optional()}),a.Ry({id:a.Z_(),planRecommendationId:a.Z_(),feedbackType:a.Km(["success","challenge","suggestion","quote"]),feedbackText:a.Z_(),sentiment:a.Km(["positive","neutral","negative"]).optional(),submittedAt:a.Z_(),submittedBy:a.Z_().optional()}),a.Ry({id:a.Z_(),planId:a.Z_(),metric:a.Z_(),snapshotType:a.Km(["baseline","checkpoint","final"]),value:a.G0([a.Rx(),a.Z_()]),recordedAt:a.Z_(),notes:a.Z_().optional()}),a.Ry({planRecommendationId:a.Z_(),metric:a.Z_(),scenario:a.Z_(),baselineValue:a.G0([a.Rx(),a.Z_()]),finalValue:a.G0([a.Rx(),a.Z_()]),delta:a.Rx(),deltaPercent:a.Rx(),coverage:a.Rx(),persistence:a.Rx(),evidenceScore:a.Rx(),success:a.O7(),winRate:a.Rx(),observationDays:a.Rx(),calculatedAt:a.Z_()});class i{createPlan(e){let t={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.plans.set(t.id,t),this.saveToLocalStorage(),t}getPlan(e){return this.plans.get(e)}getPlansByTenant(e){return Array.from(this.plans.values()).filter(t=>t.tenantId===e)}updatePlan(e,t){let s=this.plans.get(e);if(!s)return;let a={...s,...t,updatedAt:new Date().toISOString()};return this.plans.set(e,a),this.saveToLocalStorage(),a}deletePlan(e){let t=this.plans.delete(e);return t&&this.saveToLocalStorage(),t}createPlanRecommendation(e){let t={...e,id:crypto.randomUUID(),addedAt:new Date().toISOString()};return this.planRecommendations.set(t.id,t),this.saveToLocalStorage(),t}getPlanRecommendation(e){return this.planRecommendations.get(e)}getPlanRecommendationsByPlan(e){return Array.from(this.planRecommendations.values()).filter(t=>t.planId===e)}updatePlanRecommendation(e,t){let s=this.planRecommendations.get(e);if(!s)return;let a={...s,...t};return this.planRecommendations.set(e,a),this.saveToLocalStorage(),a}createEvent(e){let t={...e,id:crypto.randomUUID(),recordedAt:new Date().toISOString()};return this.events.set(t.id,t),this.saveToLocalStorage(),t}getEventsByPlanRecommendation(e){return Array.from(this.events.values()).filter(t=>t.planRecommendationId===e)}getAllEvents(){return Array.from(this.events.values())}createFeedback(e){let t={...e,id:crypto.randomUUID(),submittedAt:new Date().toISOString()};return this.feedback.set(t.id,t),this.saveToLocalStorage(),t}getFeedbackByPlanRecommendation(e){return Array.from(this.feedback.values()).filter(t=>t.planRecommendationId===e)}createSnapshot(e){let t={...e,id:crypto.randomUUID(),recordedAt:new Date().toISOString()};return this.snapshots.set(t.id,t),this.saveToLocalStorage(),t}getSnapshotsByPlan(e){return Array.from(this.snapshots.values()).filter(t=>t.planId===e)}saveToLocalStorage(){try{localStorage.setItem("copilot_nav_plans",JSON.stringify(Array.from(this.plans.entries()))),localStorage.setItem("copilot_nav_plan_recs",JSON.stringify(Array.from(this.planRecommendations.entries()))),localStorage.setItem("copilot_nav_events",JSON.stringify(Array.from(this.events.entries()))),localStorage.setItem("copilot_nav_feedback",JSON.stringify(Array.from(this.feedback.entries()))),localStorage.setItem("copilot_nav_snapshots",JSON.stringify(Array.from(this.snapshots.entries())))}catch(e){console.warn("Failed to save to localStorage:",e)}}loadFromLocalStorage(){try{let e=localStorage.getItem("copilot_nav_plans"),t=localStorage.getItem("copilot_nav_plan_recs"),s=localStorage.getItem("copilot_nav_events"),a=localStorage.getItem("copilot_nav_feedback"),n=localStorage.getItem("copilot_nav_snapshots");e&&(this.plans=new Map(JSON.parse(e))),t&&(this.planRecommendations=new Map(JSON.parse(t))),s&&(this.events=new Map(JSON.parse(s))),a&&(this.feedback=new Map(JSON.parse(a))),n&&(this.snapshots=new Map(JSON.parse(n)))}catch(e){console.warn("Failed to load from localStorage:",e)}}clearAll(){this.plans.clear(),this.planRecommendations.clear(),this.events.clear(),this.feedback.clear(),this.snapshots.clear(),this.saveToLocalStorage()}constructor(){this.plans=new Map,this.planRecommendations=new Map,this.events=new Map,this.feedback=new Map,this.snapshots=new Map,this.loadFromLocalStorage()}}let r=null;function o(){return r||(r=new i),r}}},function(e){e.O(0,[547,799,971,117,744],function(){return e(e.s=7249)}),_N_E=e.O()}]);